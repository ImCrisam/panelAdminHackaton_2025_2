import{j as r,a as c}from"./index-DAsbAn0n.js";import{C as l}from"./CFormLabel-we-oz3Y-.js";import{C as i}from"./CFormInput-5hW1ibXO.js";import{C as j}from"./CFormTextarea-SHANPZuj.js";import{C as u}from"./CFormCheck-CxmFj_NZ.js";import{b as C,a as f}from"./index.esm-CPR-GhB5.js";import{C as b,a as v}from"./CCardBody-DDA5SjY-.js";import{C as y}from"./CCardHeader-Cwv67G8Q.js";import{C as E}from"./CForm-C03n7_Ai.js";import"./CFormControlWrapper-Cxpez3An.js";import"./CFormControlValidation-BSwADoeh.js";import"./DefaultLayout-D0Jx4GLX.js";import"./cil-user-Dlmw-Gem.js";const g=({campo:a})=>{switch(a.tipo){case"fecha":case"rango_fecha":return r.jsxs("div",{className:"mb-3",children:[r.jsx(l,{children:a.nombre}),r.jsx(i,{type:"date",defaultValue:a.valor})]});case"booleano":return r.jsx("div",{className:"mb-3",children:r.jsx(u,{label:a.nombre,defaultChecked:a.valor})});case"texto_largo":return r.jsxs("div",{className:"mb-3",children:[r.jsx(l,{children:a.nombre}),r.jsx(j,{rows:4,defaultValue:a.valor})]});default:return r.jsxs("div",{className:"mb-3",children:[r.jsx(l,{children:a.nombre}),r.jsx(i,{defaultValue:a.valor})]})}},w=({lista:a})=>{var o;return r.jsxs("div",{className:"mb-4",children:[r.jsx("h5",{children:a.nombre}),r.jsx("p",{children:a.descripcion}),(o=a.campos)==null?void 0:o.map((n,t)=>r.jsx(g,{campo:n},t))]})},W=()=>{const[a,o]=c.useState(null),[n,t]=c.useState({});if(c.useEffect(()=>{(async()=>{try{const s=await fetch("http://localhost:3001/api/panel-info");if(!s.ok)throw new Error("Error al cargar datos");const d=await s.json();o(d);const h={};d.campos.forEach(m=>{h[m.label]=m.valor||""}),t(h)}catch(s){console.error("Fetch error:",s),o({campos:[]}),t({})}})()},[]),!a)return r.jsx("p",{children:"Cargando datos..."});const p=async()=>{try{if(!(await fetch("http://localhost:3001/api/panel-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Error al guardar");alert("Datos guardados con Ã©xito")}catch(e){alert("Error guardando: "+e.message)}},x=()=>{const e={};a.campos.forEach(s=>{e[s.label]=s.valor||""}),t(e)};return r.jsx(C,{className:"py-4",children:r.jsxs(b,{children:[r.jsx(y,{children:r.jsx("h3",{children:a.titulo})}),r.jsx(v,{children:r.jsxs(E,{children:[a.campos.map((e,s)=>e.tipo==="lista"?r.jsx(w,{lista:e},s):r.jsxs("div",{className:"mb-3",children:[r.jsx(l,{htmlFor:`campo-${s}`,children:e.label}),r.jsx(i,{id:`campo-${s}`,type:"text",defaultValue:e.valor||"",placeholder:e.placeholder||""})]},s)),r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx(f,{color:"primary",onClick:p,children:"Guardar"}),r.jsx(f,{color:"secondary",onClick:x,children:"Cancelar"})]})]})})]})})};export{W as default};
